<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Typing Challenge - SkillSena</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #00c6ff, #0072ff);
      color: #fff;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.2);
      font-size: 16px;
    }
    .game-container {
      max-width: 600px;
      margin: 20px auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 16px;
      backdrop-filter: blur(6px);
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    h2 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 15px;
    }
    #timer {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
    }
    #paragraph {
      background: rgba(255,255,255,0.2);
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      font-size: 18px;
      color: #fff;
    }
    textarea {
      width: 100%;
      height: 100px;
      font-size: 16px;
      padding: 10px;
      border-radius: 8px;
      border: none;
      resize: none;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 14px;
      font-size: 18px;
      background: #ffcc00;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #e6b800;
    }
    #result {
      text-align: center;
      font-size: 20px;
      margin-top: 20px;
      font-weight: bold;
    }
  </style>

  <!-- Firebase v8 Scripts -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDeStwcK3nJQdmLXtyWUZ52E30abBUAYBA",
      authDomain: "apnaskillsena.firebaseapp.com",
      databaseURL: "https://apnaskillsena-default-rtdb.firebaseio.com",
      projectId: "apnaskillsena",
      storageBucket: "apnaskillsena.appspot.com",
      messagingSenderId: "149529300642",
      appId: "1:149529300642:web:2e07cdea6e7933133491fb"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>
</head>
<body oncopy="return false" onpaste="return false">
  <div class="top-bar">
    <div>üë§ <span id="username">User</span></div>
    <div>üí∞ ‚Çπ<span id="balance">0</span></div>
  </div>

  <div class="game-container">
    <h2>‚å®Ô∏è Typing Challenge</h2>
    <div id="timer">‚è± Time Left: 60s</div>
    <div id="paragraph">Loading paragraph...</div>
    <textarea id="typed" placeholder="Start typing here..." oninput="checkParagraph()"></textarea>
    <button onclick="submitGame()">Submit</button>
    <div id="result"></div>
  </div>

  <script>
    // Sync sessionStorage with localStorage if needed
    const mobile = localStorage.getItem("loggedInUser");
    if (!mobile) {
      alert("Please login first.");
      window.location.href = "login.html";
    }
    sessionStorage.setItem("mobile", mobile);

    let user = {};
    let bet = parseInt(localStorage.getItem("typing_bet")) || 10;
    let usedIndexes = [];
    let currentPara = "";
    let totalCorrectWords = 0;
    let timer = 60;
    let interval;

    const paragraphs = [
 "Typing quickly is an important skill for students and professionals.",     
"Daily practice can significantly improve your typing speed.",
"Skill-based games make learning more engaging and enjoyable.",
"Consistent effort leads to noticeable skill improvement over time.",
"SkillSena is a great platform for competitive skill-based games.",
"Stay focused and motivated while practicing typing.",
"Hard work will always outperform talent without dedication.",
"Practicing every day builds long-lasting typing mastery.",
"Winners treat losses as opportunities to learn and grow.",
"Daily typing exercises strengthen both mind and speed.",
"Typing regularly makes it more natural and effortless.",
"Challenging games improve your reaction time and focus.",
"Dedication and patience are keys to skill mastery.",
"SkillSena motivates players to push their limits.",
"Typing with full attention reduces mistakes and increases accuracy.",
"Success comes from steady and persistent efforts.",
"Small daily progress adds up to great achievements.",
"Every challenge you face helps you grow stronger.",
"Regular practice sharpens the mind and boosts confidence.",
"Speed typing is a skill that can be learned by anyone.",
"Faster typing increases productivity in daily tasks.",
"Skill-based challenges keep learning exciting.",
"Consistent effort produces better results than short bursts of work.",
"SkillSena turns practice into competitive fun.",
"Focused attention leads to great accomplishments.",
"True mastery comes from repeated practice, not luck.",
"Improvement happens step by step, every day.",
"Failures are lessons that pave the way for success.",
"Typing regularly helps maintain accuracy at high speeds.",
"Typing fast allows you to focus on ideas instead of letters.",
"Skill games train patience, strategy, and quick thinking.",
"Persistence turns hard work into expertise.",
"SkillSena rewards both fun and skill growth.",
"Typing with purpose helps build speed naturally.",
"Determination transforms dreams into achievable goals.",
"Every skill starts with a decision to learn.",
"You don‚Äôt have to be great to start, but you must start to be great.",
"Mistakes are stepping stones toward perfection.",
"Consistent typing exercises sharpen your brain.",
"Skills grow when you work on them every day.",
"Typing challenges combine speed with accuracy practice.",
"Every keystroke brings you closer to improvement.",
"SkillSena makes learning feel like a game.",
"Discipline lays the foundation for achievement.",
"A good typist can accomplish more in less time.",
"Daily brain training improves reaction speed.",
"Steady practice beats occasional intense effort.",
"Skilled players adapt quickly to new challenges.",
"Typing often builds muscle memory for speed.",
"SkillSena keeps you motivated to improve.",
"Challenging yourself leads to personal growth.",
"Successful people make practice a habit.",
"Skill-based games turn learning into fun.",
"Your typing speed reflects your practice time.",
"Focused sessions bring better results than distracted practice.",
"SkillSena combines learning with competition.",
"Patience, dedication, and time build mastery.",
"Pushing limits reveals your true potential.",
"Typing faster also sharpens your thinking speed.",
"SkillSena lets you test your abilities daily.",
"Repetition creates permanent improvement.",
"Rewarding games motivate you to keep playing.",
"Showing up every day is the secret to success.",
"Every expert was once a beginner.",
"Typing well requires both speed and precision.",
"Skill-based gaming is the future of competition.",
"Progress is made with small, steady steps.",
"SkillSena promotes healthy competitive spirit.",
"Fast typing improves work and study performance.",
"Focus is a skill that gets better with use.",
"Daily habits shape long-term mastery.",
"Quick thinking leads to faster typing.",
"SkillSena inspires you to give your best.",
"Motivation fuels action, which builds skill.",
"Practice with clear goals for faster results.",
"Mastery is built on consistent effort.",
"Strong typing skills save time and energy.",
"Skill games improve decision-making under pressure.",
"Enjoy the process, not just the end result.",
"Every typing session is an investment in your growth.",
"Daily action is the fastest way to improve.",
"SkillSena turns practice into adventure.",
"Accuracy matters as much as speed.",
"Consistent work leads to lasting results.",
"Typing practice is a workout for your mind.",
"A calm mind types faster and more accurately.",
"Combining fun with practice speeds up learning.",
"Keep going until typing feels effortless.",
"SkillSena celebrates dedication and persistence.",
"Focused training boosts typing speed and mental agility.",
"Small daily gains add up to big results.",
"Skill-based games build quick thinking skills.",
"Tracking your progress speeds up improvement.",
"SkillSena makes learning interactive and fun.",
"Typing games keep practice exciting.",
"Challenges strengthen your typing ability.",
"Persistence, patience, and hard work always win.",
"SkillSena blends entertainment with growth.",
"Typing speed benefits exams, work, and everyday life.",
"Every moment spent practicing builds mastery."
"Typing faster saves valuable time in daily activities.",
"Practice every day to see steady improvement in typing speed.",
"Skill-based games are both fun and mentally stimulating.",
"Consistent practice transforms average skills into great ones.",
"SkillSena offers a space to challenge yourself and grow.",
"Focus and determination are keys to improving any skill.",
"Hard work with patience leads to long-lasting success.",
"Daily effort builds skills that stay with you for life.",
"Winners keep trying until they succeed.",
"Typing practice every day increases both speed and accuracy.",
"The more you type, the more confident you become.",
"Skill games enhance both hand-eye coordination and focus.",
"Dedication to practice produces better results over time.",
"SkillSena motivates you to aim for higher performance.",
"Typing with care helps you make fewer errors.",
"Success is built on the foundation of discipline.",
"Even small daily progress is worth celebrating.",
"Challenges help you discover your hidden strengths.",
"Regular practice boosts your confidence in typing.",
"Speed typing improves your performance in school and work.",
"Typing fast helps you complete tasks quickly.",
"Skill-based challenges make learning enjoyable.",
"Steady effort outperforms irregular hard work.",
"SkillSena combines skill development with competition.",
"Strong focus brings strong results.",
"Mastery comes from repetition and learning from mistakes.",
"Every day is a new chance to improve.",
"Setbacks teach you how to move forward better.",
"Typing regularly keeps your skills sharp.",
"Typing fast frees your mind to focus on ideas.",
"Skill games encourage strategic thinking.",
"Persistence turns beginners into experts.",
"SkillSena rewards your improvement over time.",
"Type with intention for better results.",
"Determination can make the impossible possible.",
"Learning any skill starts with the decision to try.",
"Success begins with small, consistent actions.",
"Mistakes are proof that you are learning.",
"Typing sharpens both your brain and your reflexes.",
"Skill grows through dedication and effort.",
"Typing challenges improve your speed and accuracy.",
"Every key you press is a step toward mastery.",
"SkillSena makes practice exciting and competitive.",
"Discipline is the secret ingredient to success.",
"A skilled typist can work more efficiently.",
"Daily brain training leads to faster decision-making.",
"Steady, focused practice builds expertise.",
"Skilled players learn to adapt quickly.",
"Typing often strengthens muscle memory.",
"SkillSena inspires you to practice daily.",
"Pushing your limits helps you discover your abilities.",
"Practice turns dreams into achievable goals.",
"Skill games make learning interactive and fun.",
"Typing speed reflects your time spent practicing.",
"Focused sessions lead to better improvement.",
"SkillSena is a community for skill growth.",
"Patience and persistence create success stories.",
"Reaching your potential requires consistent effort.",
"Typing faster improves your overall workflow.",
"SkillSena encourages you to keep learning.",
"Daily repetition leads to long-term improvement.",
"Fun challenges keep you motivated to practice.",
"Showing up daily is half the battle won.",
"Every master was once a beginner.",
"Accuracy is just as valuable as speed.",
"Skill-based gaming is both fun and productive.",
"Progress is made through consistent small steps.",
"SkillSena promotes a positive learning environment.",
"Fast typing helps you perform better in any field.",
"Focus grows stronger with daily use.",
"Good habits lead to mastery over time.",
"Quick thinking pairs well with fast typing.",
"SkillSena pushes you to perform your best.",
"Motivation helps you stay on track.",
"Practicing with goals speeds up learning.",
"Consistent effort turns practice into expertise.",
"Typing skills save you time every day.",
"Skill games improve your ability to think quickly.",
"Enjoy the learning process and stay motivated.",
"Every typing session builds your skill set.",
"Daily effort is the fastest way to improve.",
"SkillSena turns challenges into opportunities.",
"Accuracy and speed work best together.",
"Consistent work produces lasting improvement.",
"Typing practice trains your brain to work faster.",
"A focused mind types faster with fewer errors.",
"Fun challenges speed up your progress.",
"Keep practicing until it becomes second nature.",
"SkillSena values dedication and persistence.",
"Focused training increases both speed and accuracy.",
"Daily progress adds up to major achievements.",
"Skill games develop problem-solving skills.",
"Tracking your growth helps you improve faster.",
"SkillSena makes practice more engaging.",
"Typing games prevent practice from feeling boring.",
"Challenging yourself helps you learn faster.",
"Patience, practice, and persistence lead to mastery.",
"SkillSena blends fun with improvement.",
"Typing speed benefits your studies and career.",
"Every bit of practice brings you closer to success."
"Typing fast helps you stay ahead in work and studies.",
"Practicing every day builds strong typing skills over time.",
"Skill-based games are a fun way to train your brain.",
"Consistent effort turns beginners into professionals.",
"SkillSena gives you a chance to showcase your skills.",
"Focus is the secret to improving any ability.",
"Hard work and patience create long-term success.",
"Daily typing practice leads to lasting improvement.",
"Winners never give up on their goals.",
"Typing regularly boosts both speed and confidence.",
"Frequent practice makes typing second nature.",
"Skill games improve coordination and quick thinking.",
"Dedication ensures steady progress in your skills.",
"SkillSena challenges you to aim higher.",
"Typing with focus reduces mistakes and saves time.",
"Discipline makes success achievable.",
"Small improvements each day build into major progress.",
"Challenges help you grow beyond your comfort zone.",
"Regular practice builds strong confidence.",
"Speed typing gives you an edge in any competitive environment.",
"Typing faster helps complete assignments quicker.",
"Skill-based challenges keep learning enjoyable.",
"Steady dedication produces better results than rare effort.",
"SkillSena creates a competitive and fun environment.",
"Strong focus turns practice into progress.",
"Mastery is built from constant repetition.",
"Each day is a fresh chance to improve.",
"Mistakes teach you how to do better next time.",
"Typing daily keeps your skills polished.",
"Typing fast lets you think more creatively.",
"Skill games train your brain to work efficiently.",
"Persistence transforms ordinary skills into extraordinary ones.",
"SkillSena rewards effort and improvement.",
"Typing with purpose speeds up learning.",
"Determination leads to great achievements.",
"Every skill starts with a first step.",
"Consistent small steps lead to big success.",
"Mistakes are opportunities to learn and grow.",
"Typing sharpens memory and focus.",
"Skills develop through steady practice.",
"Typing challenges push you to perform better.",
"Every word you type improves your ability.",
"SkillSena makes learning enjoyable and competitive.",
"Discipline keeps you moving toward your goals.",
"Fast typists can handle tasks more efficiently.",
"Daily brain workouts improve mental agility.",
"Focused daily practice creates mastery.",
"Skilled players know how to adapt quickly.",
"Typing often strengthens your muscle memory.",
"SkillSena motivates you to stay consistent.",
"Pushing your limits builds stronger skills.",
"Practice turns goals into accomplishments.",
"Skill games add excitement to learning.",
"Typing speed shows your level of commitment.",
"Focused practice delivers better results.",
"SkillSena supports your growth journey.",
"Patience and dedication make you unstoppable.",
"Daily practice reveals your true potential.",
"Typing faster helps in all aspects of life.",
"SkillSena inspires you to keep practicing.",
"Repetition creates skill mastery.",
"Fun games make you want to keep practicing.",
"Being consistent is the key to progress.",
"Every expert started with basic skills.",
"Accuracy is equally important as speed.",
"Skill-based gaming sharpens your focus.",
"Progress is the result of daily action.",
"SkillSena fosters friendly competition.",
"Fast typing improves communication skills.",
"Focus becomes stronger with consistent use.",
"Good practice habits make you a master.",
"Quick thinking matches well with fast typing.",
"SkillSena encourages peak performance.",
"Motivation drives consistent action.",
"Goals help you stay committed to learning.",
"Effort applied daily turns into expertise.",
"Typing skills save time and increase productivity.",
"Skill games improve problem-solving abilities.",
"Enjoy learning and keep improving.",
"Each practice session builds your confidence.",
"Daily practice is the fastest path to growth.",
"SkillSena transforms learning into fun.",
"Speed and accuracy together define skill.",
"Consistent effort produces lasting results.",
"Typing is a great workout for the brain.",
"A clear mind helps you type faster.",
"Fun challenges make progress exciting.",
"Keep going until it becomes effortless.",
"SkillSena values continuous practice.",
"Focused training improves both accuracy and speed.",
"Small improvements lead to big wins.",
"Skill games boost your quick decision-making.",
"Tracking progress helps maintain motivation.",
"SkillSena makes skill-building enjoyable.",
"Typing games keep practice fresh and fun.",
"Challenging yourself brings faster improvement.",
"Patience and persistence are the keys to mastery.",
"SkillSena blends learning with entertainment.",
"Typing fast benefits every part of life.",
"Every bit of practice takes you closer to success."
"Typing quickly helps you complete more work in less time.",
"Daily practice develops both speed and accuracy.",
"Skill-based games help keep your mind active and engaged.",
"Consistent effort turns practice into skill.",
"SkillSena is a place to improve while having fun.",
"Focus and dedication make any goal possible.",
"Hard work with consistency leads to great achievements.",
"Typing every day ensures continuous improvement.",
"Winners use challenges as motivation to get better.",
"Typing practice increases efficiency in all tasks.",
"The more you practice, the better you become.",
"Skill games encourage faster thinking and responses.",
"Dedication is the foundation of long-term growth.",
"SkillSena inspires you to push beyond limits.",
"Typing with concentration reduces errors.",
"Discipline brings you closer to success.",
"Small daily wins lead to major progress.",
"Challenges reveal strengths you didn‚Äôt know you had.",
"Regular practice builds unstoppable confidence.",
"Typing faster gives you an edge in every field.",
"Fast typing helps you meet deadlines with ease.",
"Skill-based challenges make learning fun and competitive.",
"Steady effort brings greater rewards than rare hard work.",
"SkillSena combines fun with personal growth.",
"Focus transforms practice into progress.",
"Mastery comes with time and patience.",
"Every day is an opportunity to improve your skills.",
"Mistakes are lessons in disguise.",
"Daily typing keeps your mind sharp.",
"Typing fast frees you to think about content instead of keys.",
"Skill games train both focus and reflexes.",
"Persistence turns effort into expertise.",
"SkillSena recognizes and rewards progress.",
"Typing with intent improves results faster.",
"Determination makes every goal achievable.",
"All skills begin with a willingness to start.",
"Small steps taken daily lead to big achievements.",
"Errors are signs that you are learning something new.",
"Typing boosts focus and mental agility.",
"Skill is built through regular and mindful practice.",
"Typing challenges are a fun way to learn.",
"Every sentence you type improves your ability.",
"SkillSena keeps learning exciting.",
"Discipline creates lasting habits.",
"A skilled typist works more effectively.",
"Brain exercises like typing improve alertness.",
"Focused effort leads to better skill development.",
"Experienced players adapt quickly to challenges.",
"Typing daily strengthens your typing muscles.",
"SkillSena encourages daily improvement.",
"Going beyond your limits leads to growth.",
"Practice turns small goals into big victories.",
"Games make learning skills enjoyable.",
"Your typing speed reflects your dedication.",
"Focused learning creates stronger results.",
"SkillSena supports your journey toward mastery.",
"Patience and persistence shape champions.",
"Daily effort uncovers your full potential.",
"Typing faster improves time management.",
"SkillSena keeps you motivated to practice.",
"Repetition builds confidence and ability.",
"Fun skill games encourage regular practice.",
"Consistency is the secret behind all success.",
"Every professional started as a beginner.",
"Accuracy is the backbone of good typing.",
"Skill-based gaming is entertaining and educational.",
"Progress is built step by step.",
"SkillSena promotes friendly competition and growth.",
"Fast typing enhances workplace efficiency.",
"Focus improves through regular training.",
"Good habits make great skills.",
"Quick thinking supports fast, accurate typing.",
"SkillSena challenges you to be your best.",
"Motivation is the fuel for progress.",
"Setting goals keeps your learning on track.",
"Daily commitment turns effort into results.",
"Typing skills save both time and energy.",
"Skill games strengthen your brain's processing speed.",
"Enjoying the process makes improvement easier.",
"Each practice session increases confidence.",
"Daily repetition is the fastest way to improve.",
"SkillSena makes learning adventurous.",
"Speed combined with accuracy equals excellence.",
"Consistent work ensures lasting improvement.",
"Typing is a mental exercise anyone can do.",
"Calm focus leads to faster typing.",
"Fun challenges make skill-building enjoyable.",
"Keep practicing until it feels natural.",
"SkillSena values dedication and hard work.",
"Targeted training improves results faster.",
"Small progress daily leads to huge wins later.",
"Skill games build mental sharpness.",
"Tracking your success keeps you motivated.",
"SkillSena makes training exciting.",
"Typing games prevent boredom in practice.",
"Challenging yourself pushes your limits.",
"Patience and discipline lead to mastery.",
"SkillSena offers growth with fun.",
"Typing speed benefits every aspect of productivity.",
"Every bit of practice takes you one step forward."
"Typing quickly makes your work feel easier and smoother.",
"Daily typing practice strengthens your focus and accuracy.",
"Skill-based games are a fun way to sharpen your skills.",
"Consistent effort brings lasting results in skill development.",
"SkillSena lets you compete while improving your abilities.",
"Focus and hard work make impossible goals achievable.",
"Patience and effort create permanent skills.",
"Typing every day helps you improve without realizing it.",
"Winners treat challenges as opportunities to grow.",
"Typing practice builds confidence in communication.",
"Frequent practice helps you achieve faster typing naturally.",
"Skill games test both your speed and thinking ability.",
"Dedication ensures that progress never stops.",
"SkillSena keeps your motivation alive.",
"Typing with attention leads to better accuracy.",
"Discipline is the key to reaching your goals.",
"Small wins every day add up to big victories.",
"Challenges help you discover your strengths.",
"Regular practice turns effort into expertise.",
"Typing faster helps in both work and studies.",
"Fast typing lets you complete tasks in less time.",
"Skill-based challenges make progress exciting.",
"Steady effort leads to consistent growth.",
"SkillSena provides a platform for skill development.",
"Focus makes every practice session more effective.",
"Mastery is built from repeated effort.",
"Every day is a step toward becoming better.",
"Mistakes guide you toward improvement.",
"Typing daily sharpens your brain and reflexes.",
"Typing fast helps you focus on content creation.",
"Skill games improve decision-making skills.",
"Persistence transforms effort into mastery.",
"SkillSena recognizes and supports hard work.",
"Typing with purpose increases your speed faster.",
"Determination can help you achieve anything.",
"Every skill starts with a single step.",
"Small daily actions create huge results over time.",
"Errors show that you are pushing yourself to learn.",
"Typing boosts mental speed and focus.",
"Skill is earned through consistent practice.",
"Typing challenges make progress measurable.",
"Every paragraph you type improves your ability.",
"SkillSena keeps skill-building enjoyable.",
"Discipline turns practice into habit.",
"A skilled typist can work faster and better.",
"Typing trains your brain to process faster.",
"Focused effort leads to strong skills.",
"Skilled players respond quickly to challenges.",
"Typing daily makes you more confident.",
"SkillSena inspires dedication to practice.",
"Pushing limits creates new strengths.",
"Practice helps turn small goals into big wins.",
"Skill games make learning addictive and fun.",
"Your typing speed reflects your training effort.",
"Focused sessions create better results.",
"SkillSena helps you stay committed to growth.",
"Patience and hard work make success possible.",
"Daily practice helps you reach your full potential.",
"Typing faster gives you a competitive edge.",
"SkillSena keeps you practicing every day.",
"Repetition builds both speed and accuracy.",
"Fun challenges make you want to keep going.",
"Consistency is the secret to improvement.",
"Every skilled person started from zero.",
"Accuracy is essential for professional typing.",
"Skill-based gaming teaches patience and strategy.",
"Progress comes from consistent dedication.",
"SkillSena creates a positive practice environment.",
"Fast typing improves your time efficiency.",
"Focus gets better the more you use it.",
"Good habits create strong skills.",
"Quick thinking improves your typing flow.",
"SkillSena motivates you to perform your best.",
"Motivation and discipline work together for growth.",
"Goals help you stay on the right path.",
"Daily effort transforms potential into results.",
"Typing skills save time and reduce workload.",
"Skill games improve mental flexibility.",
"Enjoy the learning process and stay inspired.",
"Each practice session sharpens your abilities.",
"Daily work is the fastest route to progress.",
"SkillSena turns improvement into a fun challenge.",
"Speed and accuracy together make a great typist.",
"Consistent practice guarantees better results.",
"Typing trains both mind and body.",
"Calm focus makes typing smoother.",
"Fun challenges make every session exciting.",
"Keep practicing until it feels effortless.",
"SkillSena values continuous learning.",
"Focused exercises increase your typing potential.",
"Small improvements turn into major achievements.",
"Skill games keep your brain sharp and active.",
"Tracking your improvement boosts motivation.",
"SkillSena makes practicing rewarding.",
"Typing games keep the process fresh and fun.",
"Challenging yourself speeds up learning.",
"Patience and effort lead to true mastery.",
"SkillSena combines fun and serious learning.",
"Typing speed is useful in all areas of life.",
"Every moment spent practicing takes you forward."
 ];

    // Fetch user data from Firebase
    db.ref("users/" + mobile).once("value").then(snapshot => {
      if (!snapshot.exists()) {
        alert("User not found.");
        window.location.href = "login.html";
        return;
      }
      user = snapshot.val();
      document.getElementById("username").textContent = user.name || "User";
      document.getElementById("balance").textContent = user.balance || 0;

      startGame(); // Start only after user data loaded
    });

    function getRandomParagraph() {
      if (usedIndexes.length === paragraphs.length) usedIndexes = [];
      let index;
      do {
        index = Math.floor(Math.random() * paragraphs.length);
      } while (usedIndexes.includes(index));
      usedIndexes.push(index);
      currentPara = paragraphs[index];
      document.getElementById("paragraph").textContent = currentPara;
    }

    function countCorrectWords(input, original) {
      const inputWords = input.trim().split(/\s+/);
      const originalWords = original.trim().split(/\s+/);
      let count = 0;
      for (let i = 0; i < originalWords.length; i++) {
        if (inputWords[i] === originalWords[i]) count++;
      }
      return count;
    }

    function checkParagraph() {
      const typed = document.getElementById("typed").value.trim();
      const inputWords = typed.split(/\s+/);
      const originalWords = currentPara.trim().split(/\s+/);
      if (inputWords.length >= originalWords.length) {
        let correct = true;
        for (let i = 0; i < originalWords.length; i++) {
          if (inputWords[i] !== originalWords[i]) {
            correct = false;
            break;
          }
        }
        if (correct) {
          totalCorrectWords += originalWords.length;
          document.getElementById("typed").value = "";
          getRandomParagraph();
        }
      }
    }

    function submitGame() {
      clearInterval(interval);
      const finalCorrect = countCorrectWords(document.getElementById("typed").value, currentPara);
      totalCorrectWords += finalCorrect;

      let winCoins = 0;
      let resultStatus = "Loss";
      let resultText = `‚úÖ Correct Words: ${totalCorrectWords}`;

      if (totalCorrectWords >= 40) {
        resultStatus = "Win";
        winCoins = bet + Math.floor((bet / 10) * totalCorrectWords);
        user.balance += winCoins;
        resultText += `\nüéâ You Won ‚Çπ${winCoins} (Including Bet)`;
      } else {
        resultText += `\nüò¢ You Lost ‚Çπ${bet}`;
      }

      document.getElementById("result").textContent = resultText;
      document.getElementById("balance").textContent = user.balance;

      // Save updated balance
      db.ref("users/" + mobile + "/balance").set(user.balance);

      // Save result
      const newResult = {
        game: "Typing Game",
        bet: bet,
        correct: totalCorrectWords,
        amount: winCoins,
        status: resultStatus,
        time: new Date().toLocaleString()
      };
      const newKey = db.ref().child("game_results/" + mobile).push().key;
      db.ref("game_results/" + mobile + "/" + newKey).set(newResult);

      setTimeout(() => {
        window.location.href = "dashboard.html";
      }, 5000);
    }

    function startTimer() {
      interval = setInterval(() => {
        timer--;
        document.getElementById("timer").textContent = `‚è± Time Left: ${timer}s`;
        if (timer <= 0) {
          clearInterval(interval);
          submitGame();
        }
      }, 1000);
    }

    function startGame() {
      getRandomParagraph();
      startTimer();
    }
  </script>
</body>
</html>
